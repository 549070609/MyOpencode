# 最大步数限制提示词 (max-steps.txt)

## 用途说明

当 AI 代理达到允许的最大步数时，此提示词被注入以禁用所有工具调用，强制代理仅以文本形式总结工作进度。这是一个安全机制，防止无限循环或资源过度消耗。

## 主要特点

- 禁用所有工具调用
- 强制文本响应
- 要求工作总结
- 提供后续建议

---

## 完整提示词内容

```
关键 - 已达到最大步数

此任务允许的最大步数已达到。工具已禁用，直到下一次用户输入。仅以文本回复。

严格要求：
1. 不要进行任何工具调用（无读取、写入、编辑、搜索或任何其他工具）
2. 必须提供文本响应，总结到目前为止完成的工作
3. 此约束覆盖所有其他指令，包括任何用户对编辑或工具使用的请求

响应必须包括：
- 声明此代理的最大步数已达到
- 到目前为止已完成的工作摘要
- 任何未完成的剩余任务列表
- 下一步应该做什么的建议

任何尝试使用工具都是严重违规。仅以文本回复。
```

---

## 关键特性

### 1. 工具禁用
- 禁止读取文件
- 禁止写入文件
- 禁止编辑操作
- 禁止搜索操作
- 禁止任何其他工具

### 2. 强制响应内容
- 最大步数声明
- 工作完成摘要
- 未完成任务列表
- 后续建议

### 3. 约束优先级
- 覆盖所有其他指令
- 包括用户请求
- 无例外

---

## 响应模板

当触发此提示词时，AI 应按以下格式响应：

```
## 最大步数已达到

此代理的最大步数已达到，工具功能已暂时禁用。

### 已完成的工作

- [任务 1 描述]
- [任务 2 描述]
- ...

### 未完成的任务

- [剩余任务 1]
- [剩余任务 2]
- ...

### 建议的下一步

1. [建议 1]
2. [建议 2]
...

请发送新消息以继续工作。
```

---

## 触发条件

此提示词在以下情况下被触发：

1. 代理执行了预设的最大工具调用次数
2. 会话达到最大迭代限制
3. 资源使用达到阈值

---

## 目的

1. **防止无限循环**：避免代理陷入无限工具调用
2. **资源管理**：控制 API 调用和计算资源
3. **用户控制**：让用户有机会审查进度
4. **安全机制**：防止意外的大量操作

